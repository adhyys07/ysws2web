<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>TermoGame</title>
  <link href="https://fonts.cdnfonts.com/css/menlo" rel="stylesheet" />
  <style>
    * {
      box-sizing: border-box;
      font-family: 'Menlo', 'Courier New', monospace;
    }

    /*  
* Style by D3NN7
* and Patrick Hlauke (https://codepen.io/patrickhlauke/pen/YaoBop)
*/

@font-face {
    font-family: 'Menlo', 'Courier New' monospace;
    font-style: normal;
    font-weight: 400;

  }
  html { background: #000000;
         padding: 1em;
         font-family: Noto Sans Display;
         color: #ffffff;
         font-size: 1em;
         line-height: 1;
         text-shadow: 0.06rem 0 0.06rem #ea36af, -0.125rem 0 0.06rem #75fa69;
         letter-spacing: 0.125em;
         animation-duration: 0.01s;
         animation-name: textflicker;
         animation-iteration-count: infinite;
         animation-direction: alternate;
  }
  h1 { 
    font-size: 5em; 
    text-align: center;
  }

  a {
    color: white;
  }

  @media screen and (min-width: 1200px) {
    body {
        margin-left: 20rem;
        margin-right: 20rem;
    }
  }

  @media screen and (min-width: 600px) {
      body {
          margin-left: 5em;
          margin-right: 5em;
      }
  }
  
  @keyframes textflicker {
    from {
      text-shadow: 1px 0 0 #ea36af, -2px 0 0 #75fa69;
    }
    to {
      text-shadow: 2px 0.5px 2px #ea36af, -1px -0.5px 2px #75fa69;
    }
  }

    html, body {
      margin: 0;
      padding: 0;
      background-color: #000000;
      height: 100%;
      width: 100%;
      color: #ffffff;
      overflow: hidden;
    }

    .window {
      display: flex;
      flex-direction: column;
      height: 100vh;
      width: 100vw;
      background: #000000;
      color: #b5b5b5;
    }

    .title-bar {
      background: #2b2b2b;
      height: 30px;
      display: flex;
      align-items: center;
      padding: 0 10px;
      position: relative;
      z-index: 3;
    }

    .circles {
      display: flex;
      gap: 8px;
    }

    .circle {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      cursor: pointer;
    }

    .close { background-color: #ff5f56; }
    .minimize { background-color: #ffbd2e; }
    .maximize { background-color: #33ff33; }

    .title {
      color: #ffffff;
      font-weight: bold;
      font-size: 14px;
      position: absolute;
      left: 50%;
      transform: translateX(-50%);
    }

    .content {
      flex: 1;
      overflow-y: auto;
      padding: 10px 20px 0 10px;
      position: relative;
    }

    .ascii-art {
      white-space: pre;
      font-size: 12px;
      color: #ffffff;
      text-shadow: 0.06rem 0 0.06rem #fafafa;
      font-family: 'Menlo', monospace;
      position: absolute;
      top: 0;
      right: 0;
      z-index: 1;
      pointer-events: none;
      line-height: 1.1;
    }

    .terminal {
      white-space: pre-wrap;
      padding-bottom: 10px;
      position: relative;
      z-index: 2;
    }

    .input-line {
      background-color: #000;
      color: white;
      padding: 10px;
      display: flex;
      align-items: center;
    }

    .cursor {
      display: inline-block;
      width: 8px;
      height: 1em;
      background: white;
      animation: blink 1s step-start infinite;
      margin-left: 4px;
    }

    @keyframes blink {
      50% { background: transparent; }
    }

    @keyframes textflicker {
      from {
        text-shadow: 1px 0 0 #ea36af, -2px 0 0 #75fa69;
      }
      to {
        text-shadow: 2px 0.5px 2px #ea36af, -1px -0.5px 2px #75fa69;
      }
    }

    input#hiddenInput {
      position: absolute;
      opacity: 0;
      pointer-events: none;
    }

    a {
      color: white;
    }

    .input-container {
      background: #000000;
      z-index: 2;
    }
  </style>
</head>
<body onclick="focusInput()">
  <div class="window">
    <div class="title-bar">
      <div class="circles">
        <div class="circle close" onclick="openYouTube()"></div>
        <div class="circle minimize" onclick="closeFullscreen()"></div>
        <div class="circle maximize" onclick="openFullscreen()"></div>
      </div>
      <div class="title">TermoGame</div>
    </div>

    <div class="content" id="terminalContainer">
      <pre class="ascii-art">
        hhhhhhhhhhhh     
    hhhhhhhhhhhhhhhhhhh  
  Chhhhhhhhhhhhhhhhhhhhh 
 hhhhhhh   hhhhhhhhhhhhh 
 hhhhhhh   hhhhhhhhhhhhhh
 hhhhhhh   hhhhhhhhhhhhhh
hhhhhhhh         hhhhhhhh
hhhhhhhh    hh   hhhhhhhh
hhhhhhhh   hhh   hhhhhhhh
hhhhhhhh   hhh   hhhhhhhh
hhhhhhhh   hhh   hhhhhhhh
 hhhhhhh   hhh   hhhhhhh 
 hhhhhhhhhhhhhhhhhhhhhhh 
  hhhhhhhhhhhhhhhhhhhhh  
     hhhhhhhhhhhhhhh          

      </pre>
      <div class="terminal" id="terminal">Welcome to TermoGame! Type 'hey' to view commands.</div>
    </div>

    <div class="input-container">
      <div class="input-line">player@hackclub ~ %&nbsp;<span id="typed"></span><span class="cursor"></span></div>
    </div>

    <input type="text" id="hiddenInput" autofocus autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
    <audio id="typeSound" src="https://www.soundjay.com/button/beep-07.wav" preload="auto"></audio>
  </div>

  <script>
    const terminal = document.getElementById('terminal');
    const typed = document.getElementById('typed');
    const input = document.getElementById('hiddenInput');
    const typeSound = document.getElementById('typeSound');
    const terminalContainer = document.getElementById('terminalContainer');

    let commandHistory = [];
    let historyIndex = -1;

    const availableCommands = [
      'hey', 'guide', 'req', 'projects', 'reward', 'faqs', 'club-meet', 'submit', 'help', 'clear',
      'guide -n', 'req -n', 'projects -n', 'reward -n', 'faqs -n', 'club-meet -n', 'submit -n', 'help -n'
    ];

    let audioContext = new (window.AudioContext || window.webkitAudioContext)();
    let buffer = null;

    fetch("https://www.soundjay.com/button/beep-07.wav")
      .then(response => response.arrayBuffer())
      .then(arrayBuffer => audioContext.decodeAudioData(arrayBuffer))
      .then(decoded => { buffer = decoded; });

    function playTypeSound() {
      if (!buffer) return;
      const source = audioContext.createBufferSource();
      source.buffer = buffer;
      source.connect(audioContext.destination);
      source.start(0);
    }

    function focusInput() {
      input.focus();
    }

    function typeOutput(text, delay = 10) {
      let i = 0;
      function typeChar() {
        if (i < text.length) {
          terminal.innerHTML += text[i];
          terminalContainer.scrollTop = terminalContainer.scrollHeight;
          if (!/\s/.test(text[i])) playTypeSound();
          i++;
          setTimeout(typeChar, delay);
        }
      }
      typeChar();
    }

    function startGame() {
      typeOutput("\n1) guide (For a quick guide)\n2) req (Requirements to participate)\n3) projects (To see the example projects)\n4) reward (To see the reward)\n5) faqs (Frequently Asked Questions)\n6) club-meet (To run a club meeting)\n7) submit (Submit your project)\n8) help\n\nUse '-n' after any command to open in new tab (e.g. guide -n)\n");
    }

    input.addEventListener('input', () => {
      typed.innerHTML = input.value.replace(/ /g, '&nbsp;');
    });

    input.addEventListener('keydown', e => {
      if (e.key === 'ArrowUp') {
        if (commandHistory.length > 0 && historyIndex > 0) {
          historyIndex--;
          input.value = commandHistory[historyIndex];
          typed.innerHTML = input.value.replace(/ /g, '&nbsp;');

        }
      } else if (e.key === 'ArrowDown') {
        if (commandHistory.length > 0 && historyIndex < commandHistory.length - 1) {
          historyIndex++;
          input.value = commandHistory[historyIndex];
          typed.textContent = input.value;
        } else {
          input.value = '';
          typed.textContent = '';
        }
      } else if (e.key === 'Enter') {
        const value = input.value.trim().toLowerCase();
        terminal.innerHTML += `\nplayer@hackclub ~ % ${value}\n`;
        commandHistory.push(value);
        historyIndex = commandHistory.length;

        if (value === 'hey') {
          startGame();
        } else if (availableCommands.includes(value)) {
          if (value.endsWith('-n')) {
            const page = value.split(' ')[0];
            window.open(`redirects/${page}_n.html`, '_blank');
          } else if (value === 'clear') {
            terminal.innerHTML = '';
          } else {
            typeOutput("Guide: This is a simple terminal game. Type 'play' to start.\n");
          }
        } else {
          typeOutput(`'${value}' is not a recognized command.\n`);
        }

        input.value = '';
        typed.textContent = '';
        terminalContainer.scrollTop = terminalContainer.scrollHeight;
      }
    });

    function openFullscreen() {
      const elem = document.documentElement;
      if (elem.requestFullscreen) elem.requestFullscreen();
    }

    function closeFullscreen() {
      if (document.exitFullscreen) document.exitFullscreen();
    }

    function openYouTube() {
      window.open("https://www.youtube.com/watch?v=dQw4w9WgXcQ", "_blank");
    }

    focusInput();
  </script>
</body>
</html>
